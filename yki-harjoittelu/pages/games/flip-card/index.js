import Head from 'next/head';
import React, { useEffect } from 'react';
import { randomColor } from 'randomcolor';
import { ProgressBar } from 'react-bootstrap';
import { Col, Container, Row } from 'react-bootstrap';
import { loadUserWords } from '../../../redux/slices';
import { useDispatch, useSelector } from 'react-redux';
import FlipCard from '../../../components/flip-card.component';

function GamePage() {
  const dispatch = useDispatch();
  const { user } = useSelector(({ user }) => user);
  const { shuffleWords } = useSelector(({ localization }) => localization);

  useEffect(() => {
    dispatch(loadUserWords({ token: localStorage.token }));
  }, [user]);

  return (
    <div>
      <Head>
        <title>Flip Card Game</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <Container style={{ paddingTop: '5rem' }}>
        <ProgressBar>
          <ProgressBar animated striped variant='success' now={35} key={1} />
          <ProgressBar animated variant='warning' now={20} key={2} />
          <ProgressBar animated striped variant='danger' now={10} key={3} />
        </ProgressBar>
        <Row>
          {shuffleWords?.map((studyWord, index) => (
            <Col key={index} xs={12} sm={12} md={6} lg={3} xl={3}>
              <FlipCard
                studyWord={studyWord.wordId}
                color={randomColor({ format: 'hex' })}
              />
            </Col>
          ))}
        </Row>
      </Container>
    </div>
  );
}

export default GamePage;
